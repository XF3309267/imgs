(this["webpackJsonpbinary-app"]=this["webpackJsonpbinary-app"]||[]).push([[17],{466:function(t,e,a){},472:function(t,e){},493:function(t,e){},494:function(t,e){},757:function(t,e,a){"use strict";a.r(e);a(459);var n,i=a(458),o=(a(498),a(497)),r=a(3),c=a(4),s=a(5),l=a(6),u=(a(263),a(106)),f=a(0),d=a.n(f),m=a(504),h=a(503),S=(a(264),a(108)),g=a.n(S),p=a(492),y=a.n(p),_=a(58),b=a(60),k=(a(466),{artifact_id:"id",artifact_title:"\u6807\u9898",artifact_name:"\u540d\u79f0",artifact_img:"\u56fe\u7247",artifact_info:"\u4fe1\u606f",artifact_url:"\u94fe\u63a5"}),w=(u.a.Group,Object(_.g)(n=function(t){Object(l.a)(a,t);var e=Object(s.a)(a);function a(){var t;return Object(r.a)(this,a),(t=e.call(this)).createColumns=function(t){var e=t.map((function(t){return"artifact_img"===t?{title:"\u56fe\u7247",key:t,render:function(t,e){return d.a.createElement("img",{url:t.artifact_img,alt:"\u6682\u65e0\u56fe\u7247"})}}:{title:k[t],dataIndex:t,key:t}}));return e.push({title:"\u64cd\u4f5c",key:"action",Width:"100px",render:function(t){return d.a.createElement(d.a.Fragment,null,d.a.createElement(u.a,{size:"small",type:"primary"}," \u7f16\u8f91"),d.a.createElement(u.a,{size:"small",type:"danger"}," \u5220\u9664"))}}),e},t.deleteSomeKeys=function(t,e){for(var a=t,n=0;n<e.length;n++)t.splice(t.indexOf(e[n]),1);return a},t.getData=function(){t.setState({isLoading:!0}),Object(b.b)().then((function(e){var a=Object.keys(e.data[0]);a=t.deleteSomeKeys(a,["artifact_img","artifact_content"]);var n=t.createColumns(a),i=Object.keys(e.data);t.setState({dataSource:e.data,showDataSource:e.data,columns:n,total:i.length})})).catch((function(t){})).finally((function(e){t.setState({isLoading:!1})}))},t.toExcel=function(){for(var e=[Object.keys(t.state.dataSource[0])],a=0;a<t.state.dataSource.length;a++)e.push([t.state.dataSource[a].artifact_id,t.state.dataSource[a].artifact_title,t.state.dataSource[a].artifact_name,t.state.dataSource[a].artifact_url,t.state.dataSource[a].artifact_info]);var n=y.a.utils.aoa_to_sheet(e),i=y.a.utils.book_new();y.a.utils.book_append_sheet(i,n,"SheetJS"),y.a.writeFile(i,"articlesAt".concat(t.state.offset/t.state.limited+1,"-").concat(g()().format("YYYYMMDDHHmmss"),".xlsx"))},t.toUpload=function(){t.props.history.push("/admin/info/artifact/upload")},t.onPageChange=function(e,a){t.setState({offset:a*(e-1),limited:a},(function(){var e=t.state.offset,a=t.state.offset+t.state.limited+1>t.state.dataSource.length?t.state.dataSource.length:t.state.offset+t.state.limited,n=t.state.dataSource.slice(e,a);t.setState({showDataSource:n})}))},t.onShowSizeChange=function(e,a){t.setState({offset:0,limited:a},(function(){t.getData()}))},t.state={showDataSource:[],dataSource:[],columns:[],total:0,isLoading:!1,offset:0,limited:10},t}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){return d.a.createElement(i.a,{className:"myUserCard",bordered:!1,extra:d.a.createElement("div",{className:""},d.a.createElement(u.a,{type:"primary"}," \u9605\u8bfb\u6a21\u5f0f"),"\u2003",d.a.createElement(u.a,{icon:d.a.createElement(m.a,null),shape:"round",onClick:this.toUpload}," \u4e0a\u4f20"),"\u2003",d.a.createElement(u.a,{icon:d.a.createElement(h.a,null),onClick:this.toExcel},"\u5bfc\u51fa")),pagination:{current:this.state.offset/this.state.limited+1,pageSize:1}},d.a.createElement(o.a,{loading:this.state.isLoading,rowKey:function(t){return t.artifact_id},dataSource:this.state.showDataSource,columns:this.state.columns,pagination:{current:this.state.offset/this.state.limited+1,total:this.state.total,hideOnSinglePage:!1,onChange:this.onPageChange,showQuickJumper:!0,showSizeChanger:!0,onShowSizeChange:this.onShowSizeChange},className:"myUserTable"}))}}]),a}(f.Component))||n);e.default=w}}]);
//# sourceMappingURL=17.fdf80265.chunk.js.map